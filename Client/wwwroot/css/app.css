:root {
  --color-bg: #fafafa;
  --color-surface: #fff;
  --color-border: #e5e7eb;
  --color-text: #111;
  --color-text-muted: #6b7280;
  --color-primary: #2563eb;
  --color-primary-hover: #1d4ed8;
  --color-error-bg: #fdf2f2;
  --color-error-border: #fecaca;
  --color-error-text: #991b1b;
  --color-success: #047857;
  --color-warning-bg: #fff3cd;
  --color-warning-text: #856404;
  --radius: 10px;
  --radius-sm: 6px;
  --shadow: 0 1px 3px rgba(0,0,0,0.06);
  --max-width: 42rem;
}

[data-theme="dark"] {
  --color-bg: #111827;
  --color-surface: #1f2937;
  --color-border: #374151;
  --color-text: #f9fafb;
  --color-text-muted: #9ca3af;
  --color-primary: #60a5fa;
  --color-primary-hover: #93c5fd;
  --color-error-bg: #450a0a;
  --color-error-border: #7f1d1d;
  --color-error-text: #fecaca;
  --color-success: #34d399;
  --color-warning-bg: #422006;
  --color-warning-text: #fcd34d;
  --shadow: 0 1px 3px rgba(0,0,0,0.3);
}

* { box-sizing: border-box; }
body { font-family: system-ui, -apple-system, sans-serif; margin: 0; padding: 0; background: var(--color-bg); color: var(--color-text); line-height: 1.5; }

.app-layout { min-height: 100vh; display: flex; flex-direction: column; }
.app-header { display: flex; align-items: center; justify-content: space-between; padding: 1rem 1.5rem; background: var(--color-surface); border-bottom: 1px solid var(--color-border); }
.app-logo { font-weight: 700; font-size: 1.25rem; color: var(--color-text); text-decoration: none; }
.app-logo:hover { color: var(--color-primary); }
.app-nav { display: flex; align-items: center; gap: 1.25rem; }
.app-nav a { color: var(--color-text-muted); text-decoration: none; font-size: 0.95rem; }
.app-nav a:hover, .app-nav a.active { color: var(--color-primary); font-weight: 500; }
.theme-toggle { background: var(--color-bg); color: var(--color-text-muted); border: 1px solid var(--color-border); border-radius: var(--radius-sm); padding: 0.35rem 0.65rem; font-size: 0.9rem; cursor: pointer; }
.theme-toggle:hover { color: var(--color-primary); border-color: var(--color-primary); }
.app-main { flex: 1; padding: 2rem 1.5rem; max-width: var(--max-width); margin: 0 auto; width: 100%; }

/* Home */
.upload-page { display: flex; flex-direction: column; gap: 1.5rem; }
.home-hero { text-align: center; padding: 3rem 1rem; }
.home-title { margin: 0 0 0.5rem; font-size: 2rem; font-weight: 700; }
.home-tagline { margin: 0 0 1.5rem; color: var(--color-text-muted); font-size: 1.1rem; }
.btn-primary { display: inline-block; padding: 0.6rem 1.25rem; background: var(--color-primary); color: #fff; border: none; border-radius: var(--radius-sm); font-size: 1rem; font-weight: 500; text-decoration: none; cursor: pointer; }
.btn-primary:hover { background: var(--color-primary-hover); }
.btn-primary:disabled { opacity: 0.6; cursor: not-allowed; }
.home-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(10rem, 1fr)); gap: 1rem; margin-top: 2rem; }
.home-card { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius); padding: 1.25rem; box-shadow: var(--shadow); }
.home-card-title { display: block; font-weight: 600; margin-bottom: 0.35rem; }
.home-card p { margin: 0; font-size: 0.9rem; color: var(--color-text-muted); }

/* Cards */
.card { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius); padding: 1.25rem; box-shadow: var(--shadow); }
.card-title { margin: 0 0 1rem; font-size: 1.1rem; font-weight: 600; }

/* Audio upload card */
.audio-upload-card .upload-row { margin-bottom: 0.75rem; }
.audio-upload-card .record-row { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem; flex-wrap: wrap; }
.audio-upload-card .recording-active { color: var(--color-primary); font-weight: 500; }
.audio-upload-card .file-info { margin-left: 0.5rem; color: var(--color-text-muted); font-size: 0.9rem; }
.audio-upload-card .model-row { margin: 0.75rem 0 0.25rem; }
.audio-upload-card .model-row label { margin-right: 0.5rem; }
.audio-upload-card .model-row select { padding: 0.35rem 0.5rem; border-radius: var(--radius-sm); border: 1px solid var(--color-border); }
.audio-upload-card .cost-hint { color: var(--color-text-muted); font-size: 0.85rem; margin: 0.25rem 0 0.75rem; }
.audio-upload-card .button-row { display: flex; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem; }
.btn-secondary { padding: 0.5rem 1rem; background: var(--color-surface); color: var(--color-text); border: 1px solid var(--color-border); border-radius: var(--radius-sm); font-size: 0.95rem; cursor: pointer; }
.btn-secondary:hover { background: var(--color-bg); }
.btn-secondary:disabled { opacity: 0.6; cursor: not-allowed; }
.audio-upload-card .error { color: var(--color-error-text); margin: 0.5rem 0; font-size: 0.9rem; }
.audio-upload-card .hint { color: var(--color-text-muted); font-size: 0.9rem; }

/* Processing state */
.processing-state { display: flex; align-items: center; gap: 0.75rem; }
.spinner { width: 1.25rem; height: 1.25rem; border: 2px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 0.7s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.loading-text { font-size: 0.95rem; color: var(--color-text); }

/* Error card */
.error-card { background: var(--color-error-bg); border-color: var(--color-error-border); color: var(--color-error-text); }
.error-card strong { display: block; margin-bottom: 0.25rem; }

/* Analysis panel */
.analysis-panel .warning { background: var(--color-warning-bg); color: var(--color-warning-text); padding: 0.5rem 0.75rem; border-radius: var(--radius-sm); margin: 0 0 1rem; font-size: 0.9rem; }
.stats-cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(8rem, 1fr)); gap: 0.75rem; }
.stat-card { background: var(--color-bg); border: 1px solid var(--color-border); border-radius: var(--radius-sm); padding: 0.75rem 1rem; }
.stat-label { display: block; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.04em; color: var(--color-text-muted); margin-bottom: 0.25rem; }
.stat-value { font-size: 1.05rem; font-weight: 600; color: var(--color-text); }
.stat-value.stat-model { font-size: 0.8rem; font-weight: 500; word-break: break-word; }

/* Transcription result */
.transcription-result-card .transcript-container { max-height: 20rem; overflow-y: auto; background: var(--color-bg); border: 1px solid var(--color-border); border-radius: var(--radius-sm); padding: 1rem; margin: 0.5rem 0 1rem; }
.transcript-inner { font-family: ui-monospace, "Cascadia Code", "Source Code Pro", Menlo, monospace; font-size: 0.9rem; line-height: 1.6; white-space: pre-wrap; word-break: break-word; }
.speaker-label { font-weight: 700; color: var(--color-primary); margin-right: 0.25rem; }
.transcript-text { white-space: pre-line; }
.transcription-result-card .actions { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.75rem; }
.hint { color: var(--color-text-muted); font-size: 0.9rem; margin-top: 0.25rem; }
.hint.copy-success { color: var(--color-success); font-weight: 600; }

/* History */
.history-list { list-style: none; padding: 0; margin: 0.5rem 0; }
.history-list li { margin-bottom: 0.35rem; }
.link-btn { background: none; border: none; padding: 0; color: var(--color-primary); cursor: pointer; text-decoration: underline; font-size: inherit; }
.link-btn:hover { color: var(--color-primary-hover); }
.clear-history { margin-top: 0.5rem; font-size: 0.9rem; }
